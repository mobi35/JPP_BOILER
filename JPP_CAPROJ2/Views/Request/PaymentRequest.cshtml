@{
    ViewData["Title"] = "Privacy Policy";
Layout = "BackEnd";
}
@model IEnumerable<Request>


    
    <section id="main-content"> 
         <div class="wrapper">

               <h3><i class="fa fa-angle-right"></i> Form Components</h3>
        <!-- BASIC FORM ELELEMNTS -->
        <div class="row mt">
          <div class="col-lg-12">
            <div class="form-panel">
            
        
          <table class="table table-striped table-bordered responsive no-wrap" style="width:100%;margin-top:2%;" id="userList">
    <thead>
        <tr>
            <th>Address</th>
            <th>Price</th>
              <th>Status</th>
           <th>Action</th>
        </tr>
    </thead>

    <tbody>
        @{
            foreach (var request in Model)
            {
            <tr>
                <td>@request.Address</td>
                <td>@request.Description</td>
                 <td>
                 
                    <span class="label label-warning">@request.Status</span>
                     </td>
                <td> <a return="confirm('are you sure you want to delete?')" asp-route-id="@request.RequestId" asp-controller="Request" asp-action="Delete">Delete</a> 
                
                <a  asp-route-id="@request.RequestId" asp-controller="Request" asp-action="AcceptService">Accept Service</a>
                     <button onclick="getMyId('@request.RequestId')" class="btn btn-success btn-lg" id="payClick" data-toggle="modal" data-target="#myModal">
                Accept/Reject Service
                </button>

                <a return="confirm('are you sure you want to reject?')" asp-route-id="@request.RequestId" asp-controller="Request" asp-action="RejectService">Reject Service</a> </td>
            </tr>
            }
        }
    </tbody>
</table>
            </div>
          </div>
          <!-- col-lg-12-->
        </div>



</div>  
</section>

              
<br /><br /><br /><br />
     <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <form  method="post" asp-action="PayRequest" asp-controller="Request">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                      <h4 class="modal-title" id="myModalLabel">Service Quotation</h4>
                    </div>
                     
                    <div class="modal-body">
                        <h5>Placeholder</h5>
                    
                     
                          <input type="hidden" id="requestId" name="id" class="form-control" >
                          <input type="text" placeholder="Account Name" name="accountName" class="form-control" >
                             <input type="text" placeholder="Account Number" name="accountNumber" class="form-control" >
                          <div id="output">asd</div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                     
                      <input type="submit" class="btn btn-primary" value="Save Changes"/>
                    </div>
                  
                  </div>
                </div>
                  </form>
              </div>

<script>

function getMyId(x){
   var id = x;

        $.ajax({
            url: '/Request/FetchData/',
            type: 'post',
            data: {
                id: id
            },
            success: function (e) {
                $('#output').html(e);
               
            }
        });
        return false;
  }


  function getMyId(x){
    $('#requestId').val(x);
  }

  

    $(document).ready(function () {
        $('#userList').DataTable({

            responsive: true,
            lengthChange: false,
            "sScrollX": "100%",
            "scrollCollapse": true,
            dom: 'lBfrtip',
            buttons: [
                {
                    extend: 'print',

                    customize: function (win) {
                        $(win.document.body)
                            .css({ 'font-size': '10pt' })
                            .prepend(
                                '<img style= src="~/Images/activefinancelogo.png"  style="position:absolute; height:500px; z-index:5000; width:500px; top:0; left:0;" />'
                            );

                        $(win.document.body).find('table')
                            .addClass('compact')
                            .css('font-size', 'inherit');
                    }
                }, 'excelHtml5', {
                    extend: 'pdf',
                    download: 'open',
                }
            ]

        });
    });

</script>
<script src="~/DataTables-1.10.18/js/jquery.dataTables.js"></script>
<script src="~/DataTables-1.10.18/js/dataTables.buttons.min.js"></script>
<script src="~/DataTables-1.10.18/js/buttons.print.min.js"></script>

<script src="~/DataTables-1.10.18/js/pdfmake.min.js"></script>
<script src="~/DataTables-1.10.18/js/vfs_fonts.js"></script>
<script src="~/DataTables-1.10.18/js/buttons.html5.min.js"></script>
<script src="~/DataTables-1.10.18/js/jszip.min.js"></script>
<script src="~/DataTables-1.10.18/js/dataTables.responsive.min.js"></script>
<script src="~/DataTables-1.10.18/js/responsive.bootstrap4.min.js"></script>

<link href="~/DataTables-1.10.18/css/responsive.bootstrap4.min.css" rel="stylesheet" />
<link href="~/DataTables-1.10.18/css/dataTables.bootstrap4.min.css" rel="stylesheet" />
<link href="~/DataTables-1.10.18/css/button.css" rel="stylesheet" />
<script src="~/DataTables-1.10.18/js/dataTables.bootstrap4.js"></script>

